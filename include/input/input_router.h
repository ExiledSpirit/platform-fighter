// TODO: implement input routing and emiting